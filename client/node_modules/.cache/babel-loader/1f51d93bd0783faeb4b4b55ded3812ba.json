{"ast":null,"code":"var _jsxFileName = \"/Users/wendy/Documents/IRONHACK/MODULE-3/Projet-3-HelpMate/help-mate-client/client/src/components/user/UserInfosForm.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport Avatar from './Avatar';\nimport apiHandler from '../../api/APIHandler';\nimport moment from \"moment\";\n\nfunction UserInfosForm({\n  mode,\n  user,\n  history,\n  match\n}) {\n  const [formValues, setFormValues] = useState({});\n  const [avatar, setAvatar] = useState(\"\");\n  const [avatarPreview, setAvatarPreview] = useState(\"\");\n  useEffect(() => {\n    let url;\n    user ? url = user.avatar : url = 'https://www.bitgab.com/uploads/profile/files/default.png';\n    setAvatar(url);\n    setAvatarPreview(url);\n  }, [user]);\n\n  function handleChange(event) {\n    if (event.target.name === \"avatar\") return;\n    let value = event.target.type === \"checkbox\" ? event.target.checked : event.target.value;\n    setFormValues({ ...formValues,\n      [event.target.name]: value\n    });\n  }\n\n  const formHandler = async e => {\n    e.preventDefault();\n    const fd = new FormData();\n\n    for (const key in formValues) {\n      fd.append(key, formValues[key]);\n      console.log(key);\n    }\n\n    fd.append(\"avatar\", avatar);\n\n    try {\n      if (mode === \"create\") await apiHandler.post(\"/signup\", fd);else await apiHandler.patch(`/users/${user._id}`, fd);\n      history.push(\"/\");\n    } catch (apiErr) {\n      console.error(apiErr);\n    }\n  };\n\n  const handleAvatar = e => {\n    let reader = new FileReader();\n    const file = e.target.files[0];\n    setAvatar(file);\n\n    reader.onloadend = () => {\n      setAvatarPreview(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  function convertDate(str) {\n    return moment(str, moment.ISO_8601).format(\"YYYY-MM-DD\");\n  }\n\n  return React.createElement(\"div\", {\n    className: \"center-content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: formHandler,\n    onChange: handleChange,\n    className: \"form\",\n    encType: \"multipart/form-data\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(Avatar, {\n    clbk: handleAvatar,\n    avatar: avatarPreview,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, \"Pseudo\"), React.createElement(\"input\", {\n    className: \"input\",\n    name: \"username\",\n    type: \"text\",\n    id: \"username\",\n    placeholder: \"Ex : Jojo du 52\",\n    defaultValue: user && user.username,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"lastName\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Nom\"), React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    name: \"lastName\",\n    id: \"lastName\",\n    placeholder: \"\",\n    defaultValue: user && user.lastName,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Pr\\xE9nom\"), React.createElement(\"input\", {\n    className: \"input\",\n    type: \"text\",\n    name: \"name\",\n    id: \"name\",\n    placeholder: \"\",\n    defaultValue: user && user.name,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"birthday\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Date de naissance\"), React.createElement(\"input\", {\n    className: \"input\",\n    type: \"date\",\n    name: \"birthday\",\n    id: \"birthday\",\n    value: user && convertDate(user.birthday),\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, \"Genre\"), React.createElement(\"div\", {\n    className: \"select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    id: \"gender\",\n    name: \"gender\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Choisir une option\"), React.createElement(\"option\", {\n    value: \"homme\",\n    selected: user && 'homme' === user.gender,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Homme\"), React.createElement(\"option\", {\n    value: \"femme\",\n    selected: user && 'femme' === user.gender,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, \"Femme\"), React.createElement(\"option\", {\n    value: \"autre\",\n    selected: user && 'autre' === user.gender,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, \"Autre\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Description\"), React.createElement(\"input\", {\n    className: \"input\",\n    name: \"description\",\n    type: \"text\",\n    id: \"description\",\n    placeholder: \"Dites nous tout sur vous ...\",\n    defaultValue: user && user.description,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Email\"), React.createElement(\"input\", {\n    className: \"input\",\n    name: \"email\",\n    type: \"email\",\n    id: \"email\",\n    placeholder: \"\",\n    defaultValue: user && user.email,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  })), mode === 'create' && React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Mot de passe\"), React.createElement(\"input\", {\n    className: \"input\",\n    name: \"password\",\n    type: \"password\",\n    id: \"password\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"phone\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"T\\xE9l\\xE9phone\"), React.createElement(\"input\", {\n    className: \"input\",\n    name: \"phone\",\n    type: \"phone\",\n    id: \"phone\",\n    placeholder: \"\",\n    defaultValue: user && user.phone,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"field\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"label\",\n    htmlFor: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, \"Vous \\xEAtes ...\"), React.createElement(\"div\", {\n    className: \"select\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"select\", {\n    id: \"status\",\n    name: \"status\",\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"option\", {\n    value: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, \"Choisir une option\"), React.createElement(\"option\", {\n    value: \"particulier\",\n    selected: user && 'particulier' === user.status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"un particulier\"), React.createElement(\"option\", {\n    value: \"association\",\n    selected: user && 'association' === user.status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"une association\"), React.createElement(\"option\", {\n    value: \"entreprise\",\n    selected: user && 'entreprise' === user.status,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"une entreprise\"))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"button is-primary is-rounded\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, \"Soumettre\")))))));\n}\n\nexport default withRouter(UserInfosForm);","map":{"version":3,"sources":["/Users/wendy/Documents/IRONHACK/MODULE-3/Projet-3-HelpMate/help-mate-client/client/src/components/user/UserInfosForm.jsx"],"names":["React","useState","useEffect","withRouter","Avatar","apiHandler","moment","UserInfosForm","mode","user","history","match","formValues","setFormValues","avatar","setAvatar","avatarPreview","setAvatarPreview","url","handleChange","event","target","name","value","type","checked","formHandler","e","preventDefault","fd","FormData","key","append","console","log","post","patch","_id","push","apiErr","error","handleAvatar","reader","FileReader","file","files","onloadend","result","readAsDataURL","convertDate","str","ISO_8601","format","username","lastName","birthday","gender","description","email","phone","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect}from 'react'\nimport { withRouter } from \"react-router-dom\";\nimport Avatar from './Avatar'\nimport apiHandler from '../../api/APIHandler'\nimport moment from \"moment\"\n\nfunction UserInfosForm({mode , user, history, match}) {\n    const [formValues, setFormValues] = useState({});\n    const [avatar, setAvatar] = useState(\"\");\n    const [avatarPreview, setAvatarPreview] = useState(\"\");\n\n    useEffect(()=>{\n      let url;\n      user ? url = user.avatar : url='https://www.bitgab.com/uploads/profile/files/default.png';\n      setAvatar(url);\n      setAvatarPreview(url);\n    },[user])\n  \n    function handleChange(event) {\n        if (event.target.name === \"avatar\") return;\n        let value =\n          event.target.type === \"checkbox\"\n            ? event.target.checked\n            : event.target.value;\n        setFormValues({\n          ...formValues,\n          [event.target.name]: value\n        });\n      }\n    \nconst formHandler = async  e => {\n        e.preventDefault();\n        const fd = new FormData();\n        for (const key in formValues) {\n          fd.append(key, formValues[key])\n          console.log(key)\n        }\n        fd.append(\"avatar\", avatar);\n\n        try {\n          if (mode === \"create\") await apiHandler.post(\"/signup\", fd);\n          else await apiHandler.patch(`/users/${user._id}`, fd);\n          history.push(\"/\");\n        } catch (apiErr) {\n          console.error(apiErr);\n        }\n}\n\n      const handleAvatar = e => {\n        let reader = new FileReader();\n        const file = e.target.files[0];\n        setAvatar(file);\n        reader.onloadend = () => {\n          setAvatarPreview(reader.result);\n        };\n        reader.readAsDataURL(file);\n      };\n      function convertDate(str) {\n        return moment(str, moment.ISO_8601).format(\"YYYY-MM-DD\")\n      }\n    return (\n        <div className='center-content'>\n            {/* <Avatar/> */}\n            <form  onSubmit={formHandler} onChange={handleChange} className='form' encType=\"multipart/form-data\">\n                    <Avatar clbk={handleAvatar} avatar={avatarPreview}/>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"name\">Pseudo</label>\n                      <input className='input' name=\"username\" type =\"text\" id=\"username\" placeholder=\"Ex : Jojo du 52\" defaultValue={user && user.username} required/>\n                    </div>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"lastName\">Nom</label>\n                      <input className='input' type=\"text\" name=\"lastName\" id=\"lastName\" placeholder=\"\" defaultValue={user && user.lastName} required/>\n                    </div>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"name\">Prénom</label>\n                      <input className='input' type=\"text\" name=\"name\" id=\"name\" placeholder=\"\" defaultValue={user && user.name} required/>\n                    </div>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"birthday\">Date de naissance</label>\n                      <input className='input' type=\"date\" name=\"birthday\" id=\"birthday\" value={user && convertDate(user.birthday)} required/>\n                    </div>\n                    <div className=\"field\">\n                    <label className='label' htmlFor=\"status\">Genre</label>\n                          <div className='select'>\n                            <select id=\"gender\" name=\"gender\" required>\n                              <option value=\"\">Choisir une option</option>\n                              <option value=\"homme\" selected={user && 'homme'===  user.gender }>Homme</option>\n                              <option value=\"femme\" selected={user && 'femme'=== user.gender}>Femme</option>\n                              <option value=\"autre\" selected={user &&'autre'===  user.gender}>Autre</option>\n                            </select>\n                          </div>\n                    <div>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"name\">Description</label>\n                      <input className='input' name=\"description\" type =\"text\" id=\"description\" placeholder=\"Dites nous tout sur vous ...\" defaultValue={user && user.description} required/>\n                    </div>\n                    <div className='field'>\n                      <label className='label' htmlFor=\"email\">Email</label>\n                      <input className='input' name=\"email\" type =\"email\" id=\"email\" placeholder=\"\" defaultValue={user && user.email} required/>\n                    </div>\n                    {mode==='create' && <div className='field'>\n                      <label className='label' htmlFor=\"password\">Mot de passe</label>\n                      <input className='input' name=\"password\" type =\"password\" id=\"password\" required/>\n                    </div>}\n                    <div className='field'>\n                      <label className='label' htmlFor=\"phone\">Téléphone</label>\n                      <input className='input' name=\"phone\" type =\"phone\" id=\"phone\" placeholder=\"\" defaultValue={user && user.phone} required/>\n                    </div>\n                    <div className=\"field\">\n                    <label className='label' htmlFor=\"status\">Vous êtes ...</label>\n                          <div className='select'>\n                            <select id=\"status\" name=\"status\" required>\n                              <option value=\"\">Choisir une option</option>\n                              <option value=\"particulier\" selected={user && 'particulier'=== user.status }>un particulier</option>\n                              <option value=\"association\" selected={user && 'association'=== user.status}>une association</option>\n                              <option value=\"entreprise\" selected={user && 'entreprise'=== user.status}>une entreprise</option>\n                            </select>\n                          </div>\n                    <div>\n                    <button className='button is-primary is-rounded'>Soumettre</button>\n                    </div>\n                    </div>\n                    </div>\n                    </div>\n            </form>\n        </div>\n    )\n}\n\nexport default withRouter(UserInfosForm);\n"]},"metadata":{},"sourceType":"module"}