{"ast":null,"code":"var _jsxFileName = \"/Users/Pauline/Desktop/Ironhack/module3/help-mate/help-mate-client/client/src/views/AdList.jsx\";\nimport React, { useContext, useEffect, useState } from \"react\"; // custom tools\n\nimport apiHandler from \"../api/APIHandler\";\nimport CardAlbum from \"../components/card/CardAlbum\";\nimport Comments from \"../components/comment/Comments\";\nimport List from \"../components/List\";\nimport Stars from \"../components/star/Stars\";\nimport UserContext from \"./../auth/UserContext\";\nimport LabPreview from \"../components/LabPreview\"; // styles\n\nimport \"./../styles/artist.css\";\nimport \"./../styles/comment.css\";\nimport \"./../styles/star.css\";\nexport default function Artist({\n  match\n}) {\n  const userContext = useContext(UserContext);\n  const {\n    currentUser\n  } = userContext;\n  const [artist, setArtist] = useState(null);\n  const [album, setAlbum] = useState([]);\n  const artistId = match.params.id;\n  const [artistAvgScore, setArtistAvgScore] = useState(0);\n\n  function getAvgScore(obj) {\n    const avgScore = obj.reduce((acc, el) => {\n      return acc += el.rate;\n    }, 0) / obj.length;\n    return isNaN(avgScore) ? 0 : avgScore;\n  }\n\n  useEffect(() => {\n    apiHandler.get(\"/artists/\" + match.params.id).then(res => {\n      // const avgScore = getAvgScore(res.data.rates);\n      setArtistAvgScore(getAvgScore(res.data.rates));\n    }).catch(err => {\n      console.error(err);\n    });\n  }, []);\n\n  const handleVote = () => {\n    apiHandler.patch(\"/artists/\" + match.params.id, {}).then(res => {}).catch(err => {\n      console.error(err);\n    });\n  };\n\n  useEffect(() => {\n    fetchAlbums();\n    apiHandler.get(\"/artists/\" + artistId).then(apiRes => {\n      setArtist(apiRes.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [artistId]);\n\n  function fetchAlbums() {\n    apiHandler.get(`/albums`).then(res => {\n      setAlbum(res.data.albums.filter(e => e.artist._id === artistId));\n    }).catch(err => {\n      console.error(err);\n    });\n  }\n\n  if (!artist) return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"No artist found\");\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Artist view\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, artist.name), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, artist.description), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, artist.style), React.createElement(Stars, {\n    mode: \"display\",\n    avgRate: artistAvgScore,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(Stars, {\n    mode: \"vote\",\n    clbk: handleVote,\n    css: \"user stars\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), album.length ? album.map((a, i) => {\n    return React.createElement(\"p\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, a.title);\n  }) : React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, \"No albums for this artist\"));\n}","map":{"version":3,"sources":["/Users/Pauline/Desktop/Ironhack/module3/help-mate/help-mate-client/client/src/views/AdList.jsx"],"names":["React","useContext","useEffect","useState","apiHandler","CardAlbum","Comments","List","Stars","UserContext","LabPreview","Artist","match","userContext","currentUser","artist","setArtist","album","setAlbum","artistId","params","id","artistAvgScore","setArtistAvgScore","getAvgScore","obj","avgScore","reduce","acc","el","rate","length","isNaN","get","then","res","data","rates","catch","err","console","error","handleVote","patch","fetchAlbums","apiRes","log","albums","filter","e","_id","name","description","style","map","a","i","title"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,QAAvC,QAAuD,OAAvD,C,CACA;;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,OAAOC,QAAP,MAAqB,gCAArB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,UAAP,MAAuB,0BAAvB,C,CAEA;;AACA,OAAO,wBAAP;AACA,OAAO,yBAAP;AACA,OAAO,sBAAP;AAEA,eAAe,SAASC,MAAT,CAAgB;AAAEC,EAAAA;AAAF,CAAhB,EAA2B;AAExC,QAAMC,WAAW,GAAGZ,UAAU,CAACQ,WAAD,CAA9B;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAkBD,WAAxB;AACA,QAAM,CAACE,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMgB,QAAQ,GAAGP,KAAK,CAACQ,MAAN,CAAaC,EAA9B;AAEA,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCpB,QAAQ,CAAC,CAAD,CAApD;;AAEA,WAASqB,WAAT,CAAqBC,GAArB,EAA0B;AACxB,UAAMC,QAAQ,GACZD,GAAG,CAACE,MAAJ,CAAW,CAACC,GAAD,EAAMC,EAAN,KAAa;AACtB,aAAQD,GAAG,IAAIC,EAAE,CAACC,IAAlB;AACD,KAFD,EAEG,CAFH,IAEQL,GAAG,CAACM,MAHd;AAIA,WAAOC,KAAK,CAACN,QAAD,CAAL,GAAkB,CAAlB,GAAsBA,QAA7B;AACD;;AAEDxB,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,UAAU,CACP6B,GADH,CACO,cAAcrB,KAAK,CAACQ,MAAN,CAAaC,EADlC,EAEGa,IAFH,CAEQC,GAAG,IAAI;AACX;AACAZ,MAAAA,iBAAiB,CAACC,WAAW,CAACW,GAAG,CAACC,IAAJ,CAASC,KAAV,CAAZ,CAAjB;AACD,KALH,EAMGC,KANH,CAMSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KARH;AASD,GAVQ,EAUN,EAVM,CAAT;;AAYA,QAAMG,UAAU,GAAG,MAAM;AACvBtC,IAAAA,UAAU,CACPuC,KADH,CACS,cAAc/B,KAAK,CAACQ,MAAN,CAAaC,EADpC,EACwC,EADxC,EAEGa,IAFH,CAEQC,GAAG,IAAI,CAAE,CAFjB,EAGGG,KAHH,CAGSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KALH;AAMD,GAPD;;AASArC,EAAAA,SAAS,CAAC,MAAM;AACd0C,IAAAA,WAAW;AACXxC,IAAAA,UAAU,CACP6B,GADH,CACO,cAAcd,QADrB,EAEGe,IAFH,CAEQW,MAAM,IAAI;AACZ7B,MAAAA,SAAS,CAAC6B,MAAM,CAACT,IAAR,CAAT;AACH,KAJH,EAKGE,KALH,CAKSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACM,GAAR,CAAYP,GAAZ;AACD,KAPH;AAQD,GAVQ,EAUN,CAACpB,QAAD,CAVM,CAAT;;AAYA,WAASyB,WAAT,GAAuB;AACrBxC,IAAAA,UAAU,CACP6B,GADH,CACQ,SADR,EAEGC,IAFH,CAEQC,GAAG,IAAI;AACXjB,MAAAA,QAAQ,CAACiB,GAAG,CAACC,IAAJ,CAASW,MAAT,CAAgBC,MAAhB,CAAuBC,CAAC,IAAIA,CAAC,CAAClC,MAAF,CAASmC,GAAT,KAAiB/B,QAA7C,CAAD,CAAR;AACD,KAJH,EAKGmB,KALH,CAKSC,GAAG,IAAI;AACZC,MAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,KAPH;AAQD;;AAEC,MAAG,CAACxB,MAAJ,EAAY,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAP;AACd,SACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAI,IAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,MAAM,CAACoC,IAAX,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIpC,MAAM,CAACqC,WAAX,CAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIrC,MAAM,CAACsC,KAAX,CAJF,EAKE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,SAAZ;AAAsB,IAAA,OAAO,EAAE/B,cAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,EAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,EAOE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,MAAZ;AAAmB,IAAA,IAAI,EAAEoB,UAAzB;AAAqC,IAAA,GAAG,EAAC,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPF,EAQCzB,KAAK,CAACc,MAAN,GAAed,KAAK,CAACqC,GAAN,CAAU,CAACC,CAAD,EAAGC,CAAH,KAAS;AAC/B,WAAO;AAAG,MAAA,GAAG,EAAEA,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAYD,CAAC,CAACE,KAAd,CAAP;AACD,GAFa,CAAf,GAEM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAVP,CADF;AAgBD","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\n// custom tools\nimport apiHandler from \"../api/APIHandler\";\nimport CardAlbum from \"../components/card/CardAlbum\";\nimport Comments from \"../components/comment/Comments\";\nimport List from \"../components/List\";\nimport Stars from \"../components/star/Stars\";\nimport UserContext from \"./../auth/UserContext\";\nimport LabPreview from \"../components/LabPreview\";\n\n// styles\nimport \"./../styles/artist.css\";\nimport \"./../styles/comment.css\";\nimport \"./../styles/star.css\";\n\nexport default function Artist({ match }) {\n\n  const userContext = useContext(UserContext);\n  const { currentUser } = userContext;\n  const [artist, setArtist] = useState(null);\n  const [album, setAlbum] = useState([]);\n  const artistId = match.params.id;\n\n  const [artistAvgScore, setArtistAvgScore] = useState(0);\n\n  function getAvgScore(obj) {\n    const avgScore =\n      obj.reduce((acc, el) => {\n        return (acc += el.rate);\n      }, 0) / obj.length;\n    return isNaN(avgScore) ? 0 : avgScore;\n  }\n\n  useEffect(() => {\n    apiHandler\n      .get(\"/artists/\" + match.params.id)\n      .then(res => {\n        // const avgScore = getAvgScore(res.data.rates);\n        setArtistAvgScore(getAvgScore(res.data.rates));\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }, []);\n\n  const handleVote = () => {\n    apiHandler\n      .patch(\"/artists/\" + match.params.id, {})\n      .then(res => {})\n      .catch(err => {\n        console.error(err);\n      });\n  };\n\n  useEffect(() => {\n    fetchAlbums()\n    apiHandler\n      .get(\"/artists/\" + artistId)\n      .then(apiRes => {\n          setArtist(apiRes.data);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }, [artistId])\n\n  function fetchAlbums() {\n    apiHandler\n      .get(`/albums`)\n      .then(res => {\n        setAlbum(res.data.albums.filter(e => e.artist._id === artistId));\n      })\n      .catch(err => {\n        console.error(err);\n      });\n  }\n\n    if(!artist) return <div>No artist found</div>\n  return (\n    <React.Fragment>\n      <h1 className=\"title\">Artist view</h1>\n      <p>{artist.name}</p>\n      <p>{artist.description}</p>\n      <p>{artist.style}</p>\n      <Stars mode=\"display\" avgRate={artistAvgScore} />\n      <br></br>\n      <Stars mode=\"vote\" clbk={handleVote} css=\"user stars\" />\n    {album.length ? album.map((a,i) => {\n        return <p key={i}>{a.title}</p>\n      }) : <p>No albums for this artist</p>}\n \n    </React.Fragment>\n  );\n\n}\n"]},"metadata":{},"sourceType":"module"}